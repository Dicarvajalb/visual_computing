<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Fotomosaico # El fotomosaico es una imagen, retrato o fotografía que se divide por figuras geométricas, generalmente por cuadrados o rectángulos del mismo tamaño, esto con el fin de remplazar las mismas por otros retratos, fotografías o imágenes que concuerden con los colores promedio que encierran las figuras geométricas de la imagen original, logrando que al visualizar la imagen de un punto lejano se logre ver como la original , pero que al ver de un punto cercano o al hacer zoom se pueda percibir que se compone de otras imágenes."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://dicarvajalb.github.io/visual_computing/docs/shortcodes/Taller-3/Photomosaic/"><title>Photomosaic | Grupo de estudio</title><link rel=manifest href=/visual_computing/manifest.json><link rel=icon href=/visual_computing/favicon.png type=image/x-icon><link rel=stylesheet href=/visual_computing/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/visual_computing/flexsearch.min.js></script>
<script defer src=/visual_computing/en.search.min.b9e2b174e48b997808a154abe6b15cd5ec7836d120215462b75f88810dcc8df3.js integrity="sha256-ueKxdOSLmXgIoVSr5rFc1ex4NtEgIVRit1+IgQ3MjfM=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://dicarvajalb.github.io/visual_computing/docs/shortcodes/Taller-3/Photomosaic/index.xml title="Grupo de estudio"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/visual_computing/><span>Grupo de estudio</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-543c92395a5da43e568c54aed57a7bf6 class=toggle>
<label for=section-543c92395a5da43e568c54aed57a7bf6 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-1/>Taller 1</a></label><ul><li><a href=/visual_computing/docs/shortcodes/Taller-1/Convoluciones/>Convoluciones</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-1/Histograma/>Histograma</a></li><li><input type=checkbox id=section-eb58e35b3307a51faa32e78ab05d9c64 class=toggle>
<label for=section-eb58e35b3307a51faa32e78ab05d9c64 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-1/Ilusiones/>Ilusiones</a></label><ul><li><a href=/visual_computing/docs/shortcodes/Taller-1/Ilusiones/BindingMovement/>Binding Movement</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-1/Ilusiones/SKE/>Ske</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-1/Ilusiones/SteppingFeet/>Stepping Feet</a></li></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-1/Lightness/>Lightness</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-1/Multiplicacion-RGB/>Multiplicacion Rgb</a></li></ul></li><li><input type=checkbox id=section-3339356ac915f37974c010a9ff982b95 class=toggle>
<label for=section-3339356ac915f37974c010a9ff982b95 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-2/>Taller 2</a></label><ul><li><input type=checkbox id=section-aec318664ee87e724026f45da2e6fe01 class=toggle>
<label for=section-aec318664ee87e724026f45da2e6fe01 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-2/Aplicacion-3-D/>Aplicacion 3 D</a></label><ul><li><a href=/visual_computing/docs/shortcodes/Taller-2/Aplicacion-3-D/Laberinto/>Laberinto</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-2/Aplicacion-3-D/LaberintoP2/>Laberinto P2</a></li></ul></li><li><input type=checkbox id=section-3e0f43450c6fe10e0095878dad3831f3 class=toggle>
<label for=section-3e0f43450c6fe10e0095878dad3831f3 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-2/Rasterizacion/>Rasterizacion</a></label><ul><li><a href=/visual_computing/docs/shortcodes/Taller-2/Rasterizacion/Midpoint-Circle-Algorithm/>Midpoint Circle Algorithm</a></li><li><a href=/visual_computing/docs/shortcodes/Taller-2/Rasterizacion/Triangle-Rasterization/>Triangle Rasterization</a></li></ul></li></ul></li><li><input type=checkbox id=section-2ca353e3df535ce80038f727e7c5ac85 class=toggle checked>
<label for=section-2ca353e3df535ce80038f727e7c5ac85 class="flex justify-between"><a href=/visual_computing/docs/shortcodes/Taller-3/>Taller 3</a></label><ul><li><a href=/visual_computing/docs/shortcodes/Taller-3/Ambient-Light/>Ambient Light</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Coloring/>Coloring</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Image-Processing/>Image Processing</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Non-Euclidean-Geometry/>Non Euclidean Geometry</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Photomosaic/ class=active>Photomosaic</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Procedural-Texturing/>Procedural Texturing</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Spatial-Coherence/>Spatial Coherence</a><ul></ul></li><li><a href=/visual_computing/docs/shortcodes/Taller-3/Texturing/>Texturing</a><ul></ul></li></ul></li></ul></li></ul><ul><li><a href=/visual_computing/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/visual_computing/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Photomosaic</strong>
<label for=toc-control><img src=/visual_computing/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#fotomosaico>Fotomosaico</a></li></ul></li><li><a href=#fotomosaico-1>Fotomosaico</a><ul><li><a href=#fotomosaico-por-hardware>Fotomosaico por hardware</a></li></ul></li><li><a href=#referencias>Referencias</a></li></ul></nav></aside></header><article class=markdown><h2 id=fotomosaico>Fotomosaico
<a class=anchor href=#fotomosaico>#</a></h2><p>El fotomosaico es una imagen, retrato o fotografía que se divide por figuras geométricas, generalmente
por cuadrados o rectángulos del mismo tamaño, esto con el fin de remplazar las mismas
por otros retratos, fotografías o imágenes que concuerden con los colores promedio que encierran las
figuras geométricas de la imagen original, logrando que al visualizar la
imagen de un punto lejano se logre ver como la original , pero que al ver de un punto cercano o al
hacer zoom se pueda percibir que se compone de otras imágenes.</p><h1 id=fotomosaico-1>Fotomosaico
<a class=anchor href=#fotomosaico-1>#</a></h1><h2 id=fotomosaico-por-hardware>Fotomosaico por hardware
<a class=anchor href=#fotomosaico-por-hardware>#</a></h2><p>La implementación del fotomosaico se puede realizar a través de hardware, es decir, la construcción de un algoritmo que se encargue de convertir la imagen original en un mosaico de otras.</p><p>En la funcion <code>preload</code> definimos el fragmento a usar demoninado <code>photomosaic.frag</code>, a partir de ahi al mosaico final vamos a definir ciertos parametros que van a ser obtenidos al momento de recorrer la imagen, aqui se comparan los texeles del color promedio que posee cada pixel de la imagen o video original.</p><p>Los colores promedio de la imagen original son comparados con la imagen devuelta por el quadrille, haciendo uso de una tolerancia que va aumentando hasta encontrar el color mas cercano al del original y de esta forma ese color encontrado es el que se usa para llenar en la imagen que se muestra como resultado.</p><details><summary>photomosaic.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript></code></pre></div></div></details><details><summary>photomosaic.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>num_images</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// source (image or video) is sent by the sketch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>source</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// palette is sent by the sketch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>palette</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// number of cols are sent by sketch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>cols</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>lumas</span>[<span style=color:#a6e22e>num_images</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>red_palette</span>[<span style=color:#a6e22e>num_images</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>green_palette</span>[<span style=color:#a6e22e>num_images</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>blue_palette</span>[<span style=color:#a6e22e>num_images</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// toggles debug
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>debug</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// toggles coloring
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>color_on</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>background</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>foreground</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// target horizontal &amp; vertical resolution
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>resolution</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated color (same name and type as in vertex shader)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>vVertexColor</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated texcoord (same name and type as in vertex shader)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>vTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> <span style=color:#a6e22e>luma</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>color</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (<span style=color:#ae81ff>0.299</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.587</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.114</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>fontCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>resolution</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>srcCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>fontCoord</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fontCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fontCoord</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>srcCoord</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>srcCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>srcCoord</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#a6e22e>resolution</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>mid</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span>(<span style=color:#ae81ff>2.0</span><span style=color:#f92672>*</span><span style=color:#a6e22e>resolution</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>srcCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>srcCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#a6e22e>mid</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>source</span>, <span style=color:#a6e22e>srcCoord</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>debug</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>lumakey</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>luma</span>(<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>rgb</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>selected</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>complete</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>float</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.02</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.02</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> ; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>num_images</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>((<span style=color:#a6e22e>red_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span><span style=color:#f92672>&gt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>j</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>red_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span> <span style=color:#f92672>&lt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>)) <span style=color:#f92672>&amp;&amp;</span> (<span style=color:#a6e22e>green_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span><span style=color:#f92672>&gt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>j</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>green_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span> <span style=color:#f92672>&lt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>)) <span style=color:#f92672>&amp;&amp;</span> (<span style=color:#a6e22e>blue_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span><span style=color:#f92672>&gt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>j</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>blue_palette</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>/</span><span style=color:#ae81ff>255.0</span> <span style=color:#f92672>&lt;</span> (<span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>))){
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>selected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>float</span>(<span style=color:#a6e22e>i</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>complete</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>complete</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tile</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec2</span>((<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>selected</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>fontCoord</span>.<span style=color:#a6e22e>x</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>cols</span>, <span style=color:#a6e22e>fontCoord</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>paletteTexel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>palette</span>, <span style=color:#a6e22e>tile</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>paletteTexel</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>photomosaic.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image_src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/visual_computing/imgs/car.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_src</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#e6db74>&#39;/visual_computing/vid/drift.mp4&#39;</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video_src</span>.<span style=color:#a6e22e>hide</span>(); <span style=color:#75715e>// by default video shows up in separate dom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mosaic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/visual_computing/sketches/shaders/photomosaic.frag&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>p</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>40</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>i</span>.<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>`/visual_computing/imgs/cars/00000</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>.jpg`</span>));
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>`/visual_computing/imgs/cars/0000</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>.jpg`</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sample</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>pg</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>SAMPLE_RES</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>width</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#a6e22e>SAMPLE_RES</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>SAMPLE_RES</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;cols&#34;</span>, <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>width</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>sort</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ascending</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cellLength</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>SAMPLE_RES</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;LUMA&#34;</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>saveLuma</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cellLength</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>SAMPLE_RES</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imageCells</span>.<span style=color:#a6e22e>saveRGB</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cellLength</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>SAMPLE_RES</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>drawQuadrille</span>(<span style=color:#a6e22e>imageCells</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>graphics</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pg</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cellLength</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>SAMPLE_RES</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>outlineWeight</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;palette&#34;</span>, <span style=color:#a6e22e>pg</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lumas&#34;</span>, <span style=color:#a6e22e>luma</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;red_palette&#34;</span>, <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;green_palette&#34;</span>, <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mosaic</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;blue_palette&#34;</span>, <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><iframe id=photomosaic style=width:675px;height:675px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script>
            <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script>
             <script src=/visual_computing/sketches/libraries/p5.shaderbox.js></script> 
             <script src=/visual_computing/sketches/libraries/p5.quadrille.js></script> 
            
            
            
            <script src=/visual_computing/sketches/photomosaic.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h1 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h1><blockquote class="book-hint warning"><ul><li>[1] <em>“Shaders”</em> <strong>github.com</strong> <a href=https://github.com/mattdesl/lwjgl-basics/wiki/Shaders>https://github.com/mattdesl/lwjgl-basics/wiki/Shaders</a> (Mar. 8, 2020).</li></ul></blockquote></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/Dicarvajalb/visual_computing/commit/d4d8d1a0b15a1fbc70bc02eb7e24708d90c418d5 title='Last modified by dleonmu | November 28, 2022' target=_blank rel=noopener><img src=/visual_computing/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 28, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#fotomosaico>Fotomosaico</a></li></ul></li><li><a href=#fotomosaico-1>Fotomosaico</a><ul><li><a href=#fotomosaico-por-hardware>Fotomosaico por hardware</a></li></ul></li><li><a href=#referencias>Referencias</a></li></ul></nav></div></aside></main></body></html>